// public/js/overlay.js

// WebSocket Verbindung aufbauen
const socket = io();

// Debug Panel Referenzen
const connectionStatus = document.getElementById('connection-status');
const lastUpdate = document.getElementById('last-update');

// Socket Status anzeigen
socket.on('connect', () => {
  if (connectionStatus) connectionStatus.textContent = 'Verbunden ✅';
});

socket.on('disconnect', () => {
  if (connectionStatus) connectionStatus.textContent = 'Getrennt ❌';
});

// Bei jedem empfangenen Update die Oberfläche aktualisieren
socket.on('updateOverlay', (data) => {
  if (lastUpdate) lastUpdate.textContent = new Date().toLocaleTimeString();

  if (data.team1 !== undefined && data.score1 !== undefined) {
    const team1Element = document.getElementById('team1');
    if (team1Element) team1Element.innerHTML = `${data.team1} <span class="score" id="score1">${data.score1}</span>`;
  }

  if (data.team2 !== undefined && data.score2 !== undefined) {
    const team2Element = document.getElementById('team2');
    if (team2Element) team2Element.innerHTML = `${data.team2} <span class="score" id="score2">${data.score2}</span>`;
  }

  if (data.spieleliste !== undefined) {
    const liste = document.getElementById('spieleliste');
    if (liste) {
      liste.innerHTML = '';
      data.spieleliste.forEach(spiel => {
        const li = document.createElement('li');
        li.textContent = spiel;
        liste.appendChild(li);
      });
    }
  }
});
